<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <title>Hill Climbing</title>
    <style>
        body{
            background-color: aquamarine;
        }
    </style>
</head>
<body>
    <script>
        $(document).ready(function(){
            var coord = {
                'Jiloyork': (19.916012,-99.580580),
                'Toluca': (19.289165, -99.655697),
                'Atlacomulco': (19.799520, -99.873844),
                'Guadalajara': (20.677754472859146, -103.346253548771137),
                'Monterrey': (25.69161110, -100.321838480256),
                'QuintanaRoo': (21.163111924844458, -86.80231502121464),
                'Michoacan': (19.701400113725654, -101.20829680213464),
                'Aguascalientes': (21.87641043660486, -102.26438663286967),
                'CDMX': (19.432713075976878, -99.13318344772986),
                'QRO': (20.59719437542255, -100.38667040246602)
            };

            function mostrarRutasAnnealing(){
                $.ajax({
                    type: "POST",
                    url: "http://127.0.0.1:5000/templado_simulado",
                    data: JSON.stringify({
                        coord: coord
                    }),
                    success: function(response){
                        var rutasAnnealing = response.map(function(ruta) {
                            return "<li>" + ruta.join("- - - -") + "<li>";
                        }).join("");
                        $("rutasAnnealing").html("<ul>" + rutasAnnealing + "</ul>");
                    },
                    error: function(xhr, status, error) {
                        console.log(xhr.status + ": " + xhr.statusText);
                    },
                    dataType: "json",
                    contentType: "application/json"
                });
            }

            function agregarCoordenada() {
                var nombre = $("#nombre_coordenada").val();
                var latitud = parseFloat($("#latitud").val());
                var longitud = parseFloat($("#longitud").val());

                if (!isNaN(latitud) && !isNaN(longitud)) {
                    coord[nombre] = [latitud, longitud];
                    $("#nombre_coordenada").val("");
                    $("#latitud").val("");
                    $("#longitud").val("");
                } else {
                    alert("Por favor, ingresa valores numéricos válidos para la latitud y longitud.");
                }
            }

            $("#btn_agregar_coordenada").click(function() {
                agregarCoordenada();
            });
        });
    </script>
    <center>
        <h1>Simulated Annealing</h1><br><br>
        <ul>
            {% for ciudad in ciudades %}
            <li>{{ ciudad }}</li>
            {% endfor %}
        </ul>
        <h2>Distancia Total: {{ distancia_total }}</h2><br><br>

        <h3>Agregar nueva ciudad</h3><br><br><br>
        <form method="post" action="/">
            Nombre: <input class="" type="text" name="nombre" required><br><br>
            Latitud: <input class="bg-danger-subtle" type="text" name="latitud" required><br><br>
            Longitud: <input class="bg-info-subtle" type="text" name="longitud" required><br><br>
            <input class="btn btn-info" type="submit" value="Agregar Ciudad">
        </form>
    </center>
</body>
</html>